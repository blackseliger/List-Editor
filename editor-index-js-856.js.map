{"version":3,"sources":["webpack://list-editor/./src/components/table/bestsellers-header.js","webpack://list-editor/./src/components/table/data.js","webpack://list-editor/./src/components/table/index.js","webpack://list-editor/./src/pages/editor/index.js"],"names":["id","title","template","price","Table","removeElement","event","target","closest","dataset","this","data","filter","item","remove","constructor","deleteEl","editElement","preventDefault","productForm","subElements","allowedFields","Object","keys","defaultForm","getValue","field","querySelector","value","productData","find","textContent","parseInt","wrapper","createForm","addEventListener","onSave","body","document","createElement","classList","element","innerHTML","getTableRow","append","headerConfig","header","render","getTemplate","firstElementChild","getSubElements","initEventListeners","tableContent","tableHeader","onClick","onForm","removeEventListeners","removeEventListener","onEdit","getFormGroup","setFormData","name","elements","querySelectorAll","getTableHeader","map","getHeaderRow","join","getTableBody","getTableRows","console","log","destroy","Page","initComponents","renderComponents","table","components","forEach","component","root","values"],"mappings":"sIAAA,MA0BA,EA1Be,CACb,CACEA,GAAI,QACJC,MAAO,QAGT,CACED,GAAI,QACJC,MAAO,SAGT,CACED,GAAI,SACJC,MAAO,SACPC,SAAU,IAAgB,oYCY9B,EA1Ba,CACX,CACEF,GAAI,SACJC,MAAO,SACPE,MAAO,KAGT,CACEH,GAAI,UACJC,MAAO,UACPE,MAAO,KAGT,CACEH,GAAI,SACJC,MAAO,SACPE,MAAO,KAGT,CACEH,GAAI,2BACJC,MAAO,aACPE,MAAO,M,wHClBI,MAAMC,EAmBjBC,cAAcC,GACV,MAAMN,EAAKM,EAAMC,OAAOC,QAAQ,uBAAuBC,QAAQT,GAC/DU,KAAKC,KAAO,IAAID,KAAKC,MAAMC,OAAQC,GAASA,EAAKb,KAAOA,GACxDM,EAAMC,OAAOC,QAAQ,uBAAuBM,SA4EhDC,cAAc,qBAjGA,IAiGA,iBAhGJ,MAgGI,iBA7FHT,IACP,MAAMU,EAAWV,EAAMC,OAAOC,QAAQ,+BACvBF,EAAMC,OAAOC,QAAQ,8BAGhCE,KAAKO,YAAYX,GAGjBU,GACAN,KAAKL,cAAcC,KAoFb,gBAzEJA,IACNA,EAAMY,iBACN,MAAM,YAAEC,GAAgBT,KAAKU,YACvBC,EAAgBC,OAAOC,KAAKb,KAAKc,aACjCC,EAAYC,GAAUP,EAAYQ,cAAe,SAAQD,MAAUE,MAEnEf,EAAOH,KAAKU,YAAYV,KAAKV,IAC7B6B,EAAcnB,KAAKC,KAAKmB,KAAMjB,GAASA,EAAKb,IAAMU,KAAKV,IAG7D,IAAK,MAAM0B,KAASL,EAAe,CAC/B,MAAMO,EAAQH,EAASC,GACvBb,EAAKc,cAAe,iBAAgBD,MAAUK,YAAwB,UAAVL,EAAoBM,SAASJ,GAASA,EAClGC,EAAYH,GAASE,EAKzBT,EAAYL,SACZJ,KAAKuB,QAAU,KACfvB,KAAKU,YAAYD,YAAc,KAC/BT,KAAKV,GAAK,OAoDA,gBAhDJM,IAGN,GAFcA,EAAMC,OAAOC,QAAQ,4BAExB,CAEP,GAAqB,OAAjBE,KAAKuB,QACL,OAEJvB,KAAKwB,aAEL,MAAM,YAAEf,GAAgBT,KAAKU,YAE7BD,EAAYgB,iBAAiB,SAAUzB,KAAK0B,WAoCtC,gBA/BJ9B,IACNA,EAAMY,iBACN,MAAMG,EAAgBC,OAAOC,KAAKb,KAAKc,cACjC,YAAEL,EAAF,KAAekB,GAAS3B,KAAKU,YAG7BK,EAAYC,GAAUP,EAAYQ,cAAe,SAAQD,MAAUE,MACnEjB,EAAO,GAEb,IAAK,MAAMe,KAASL,EACF,UAAVK,IACAf,EAAKX,GAAKyB,EAASC,IAEvBf,EAAKe,GAASD,EAASC,GAG3B,MAAMO,EAAUK,SAASC,cAAc,OACvCN,EAAQO,UAAY,6CACpBP,EAAQxB,QAAQgC,QAAW,GAAE9B,EAAKX,GAClCiC,EAAQxB,QAAQT,GAAM,GAAEW,EAAKX,GAC7BiC,EAAQS,UAAYhC,KAAKiC,YAAYhC,GAErC0B,EAAKO,OAAOX,GAGZd,EAAYL,SACZJ,KAAKuB,QAAU,KACfvB,KAAKU,YAAYD,YAAc,KAC/BT,KAAKV,GAAK,OAIVU,KAAKmC,aAAeC,EACpBpC,KAAKC,KAAOA,EACZD,KAAKqC,SACLrC,KAAKc,YAAc,CACfvB,MAAO,GACPE,MAAO,GAEXO,KAAKV,GAAK,KAGd+C,SACI,MAAMd,EAAUK,SAASC,cAAc,OAEvCN,EAAQS,UAAYhC,KAAKsC,cACzBtC,KAAK+B,QAAUR,EAAQgB,kBAEvBvC,KAAKU,YAAcV,KAAKwC,iBACxBxC,KAAKyC,qBAGTA,qBACI,MAAM,aAAEC,EAAF,YAAgBC,GAAgB3C,KAAKU,YAE3CgC,EAAajB,iBAAiB,QAASzB,KAAK4C,SAC5CD,EAAYlB,iBAAiB,QAASzB,KAAK6C,QAG/CC,uBACIlB,SAASmB,oBAAoB,QAAS/C,KAAK4C,SAC3ChB,SAASmB,oBAAoB,QAAS/C,KAAK6C,QAC3CjB,SAASmB,oBAAoB,SAAU/C,KAAKgD,QAGhDxB,aACIxB,KAAKuB,QAAUK,SAASC,cAAc,OACtC7B,KAAKuB,QAAQS,UAAYhC,KAAKiD,eAE9BjD,KAAK+B,QAAQG,OAAOlC,KAAKuB,QAAQgB,mBACjCvC,KAAKU,YAAYD,YAAcT,KAAK+B,QAAQd,cAAc,6BAI9DiC,YAAY/C,GACR,MAAM,YAAEM,GAAgBT,KAAKU,YAEvBC,EAAgBC,OAAOC,KAAKb,KAAKc,aAGvC,IAAK,MAAME,KAASL,EAAe,CAC/B,MAAMwC,EAAO1C,EAAYQ,cAAe,UAASD,OACpC,OAATmC,IACAA,EAAKjC,MAAQf,EAAKa,IAAUhB,KAAKc,YAAYE,IAIrDP,EAAYgB,iBAAiB,SAAUzB,KAAKgD,QAIhDzC,YAAYX,GACR,GAAqB,OAAjBI,KAAKuB,QACL,OAGJvB,KAAKV,GAAKM,EAAMC,OAAOC,QAAQ,uBAAuBC,QAAQT,GAC9D,MAAMa,EAAOH,KAAKC,KAAKmB,KAAMjB,GAASA,EAAKb,KAAOU,KAAKV,IAEvDU,KAAKwB,aACLxB,KAAKkD,YAAY/C,GAGrBqC,iBACI,MAAMY,EAAWpD,KAAK+B,QAAQsB,iBAAiB,kBAC/C,IAAK,MAAMlD,KAAQiD,EACfpD,KAAKU,YAAYP,EAAKJ,QAAQgC,SAAW5B,EAE7C,OAAOH,KAAKU,YAIhB4C,iBACI,MAAQ,yEACNtD,KAAKmC,aAAaoB,IAAKpD,GAASH,KAAKwD,aAAarD,IAAOsD,KAAK,sBAIpED,aAAa,GAAe,IAAf,GAAElE,EAAF,MAAMC,GAAS,EACxB,MAAQ,6CAA4CD,YAAaC,iBAIrEmE,aAAazD,GACT,MAAQ,kEACND,KAAK2D,aAAa1D,qBAIxB0D,aAAa1D,GACT,OAAOA,EAAKsD,IAAKpD,GAAU,mFAC6CA,EAAKb,gBAAgBa,EAAKb,OAAOU,KAAKiC,YAAY9B,sBACvHsD,KAAK,IAIZxB,YAAY9B,GACRyD,QAAQC,IAAI1D,GAQZ,OAPcH,KAAKmC,aAAaoB,IAAI,IAAsB,IAArB,GAAEjE,EAAF,SAAME,GAAe,EACtD,MAAO,CACHF,KACAE,cAIK+D,IAAI,IAAsB,IAArB,GAAEjE,EAAF,SAAME,GAAe,EACnC,OAAOA,EACDA,IACC,mDAAkDF,MAAOa,EAAKb,aACtEmE,KAAK,IAGZR,eACI,MAAQ,6zBAmBZX,cACI,MAAQ,8lBAUKtC,KAAKsD,wCACLtD,KAAK0D,aAAa1D,KAAKC,oDAOxCG,SACQJ,KAAK+B,SACL/B,KAAK+B,QAAQ3B,SAIrB0D,UACI9D,KAAKI,SACLJ,KAAK+B,QAAU,KACf/B,KAAKU,YAAc,M,wHC1QZ,MAAMqD,EAAK,mCACR,IADQ,oBAET,IAGb1B,SAEI,MAAMN,EAAUH,SAASC,cAAc,OASvC,OARAE,EAAQC,UAAYhC,KAAKsC,cAEzBtC,KAAK+B,QAAUA,EAAQQ,kBAEvBvC,KAAKU,YAAcV,KAAKwC,iBACxBxC,KAAKgE,iBACLhE,KAAKiE,mBAEEjE,KAAK+B,QAIhBiC,iBACI,MAAME,EAAQ,IAAIxE,EAElBM,KAAKmE,WAAa,CACdD,SAIRD,mBACIrD,OAAOC,KAAKb,KAAKmE,YAAYC,QAAQC,IACjCT,QAAQC,IAAIQ,GACZ,MAAMC,EAAOtE,KAAKU,YAAY2D,IACxB,QAAEtC,GAAY/B,KAAKmE,WAAWE,GACpCC,EAAKpC,OAAOH,KAMpBS,iBACI,MAAMY,EAAWpD,KAAK+B,QAAQsB,iBAAiB,kBAC/C,IAAK,MAAMlD,KAAQiD,EACfpD,KAAKU,YAAYP,EAAKJ,QAAQgC,SAAW5B,EAE7C,OAAOH,KAAKU,YAGhBoC,uBACI9C,KAAK8C,uBAGT1C,SACQJ,KAAK+B,SACL/B,KAAK+B,QAAQ3B,SAIrB0D,UACI9D,KAAKI,SACLJ,KAAK+B,QAAU,KACf/B,KAAKU,YAAc,KAGnB,IAAK,MAAM2D,KAAazD,OAAO2D,OAAOvE,KAAKmE,YACvCE,EAAUP,UAKlBxB,cACI,MAAQ","file":"editor-index-js-856.js","sourcesContent":["const header = [\n  {\n    id: 'title',\n    title: 'Name',\n   \n  },\n  {\n    id: 'price',\n    title: 'Price',\n   \n  },\n  {\n    id: 'action',\n    title: 'Action',\n    template: () => { return `<div class=\"table__content-cell table__content-cell-icons\">\n    <div class=\"table__icon\">\n        <img src=\"./assets/icons/handleEdit.svg\" class=\"table__icon-img\" data-element=\"handleEdit\" alt=\"edit\">\n    </div>\n    <div class=\"table__icon\">\n        <img src=\"./assets/icons/handleDelete.svg\" class=\"table__icon-img\" data-element=\"handleDelete\" alt=\"delete\">\n    </div>\n</div>`;\n    }\n  },\n];\n\nexport default header;\n","const data = [\n  {\n    id: 'Iphone',  \n    title: 'IPhone',\n    price: 60000,\n\n  },\n  {\n    id: 'Sumsung',  \n    title: 'Sumsung',\n    price: 60000,\n\n  },\n  {\n    id: 'Huawei',\n    title: 'Huawei',\n    price: 60000,\n\n  },\n  {\n    id: 'OOOOOOOoOOh Eldeen Ringg',\n    title: 'Elden Ring',\n    price: 1000000,\n  },\n];\n\nexport default data;","import header from \"./bestsellers-header\";\nimport data from \"./data\";\n\n\nexport default class Table {\n    subElements = {};\n    wrapper = null;\n\n\n    onClick = (event) => {\n        const deleteEl = event.target.closest(\"[data-element=handleDelete]\");\n        const editEl = event.target.closest(\"[data-element=handleEdit]\");\n\n        if (editEl) {\n            this.editElement(event);\n        }\n\n        if (deleteEl) {\n            this.removeElement(event);\n        }\n\n    }\n\n    removeElement(event) {\n        const id = event.target.closest('.table__content-row').dataset.id;\n        this.data = [...this.data].filter((item) => item.id !== id);\n        event.target.closest('.table__content-row').remove();\n    }\n\n    onEdit = (event) => {\n        event.preventDefault();\n        const { productForm } = this.subElements;\n        const allowedFields = Object.keys(this.defaultForm);\n        const getValue = (field) => productForm.querySelector(`[name=${field}]`).value;\n\n        const item = this.subElements[this.id];\n        const productData = this.data.find((item) => item.id == this.id);\n\n    \n        for (const field of allowedFields) {\n            const value = getValue(field);\n            item.querySelector(`[data-element=${field}]`).textContent = field === 'price' ? parseInt(value) : value;\n            productData[field] = value;\n        }\n\n\n\n        productForm.remove();\n        this.wrapper = null;\n        this.subElements.productForm = null;\n        this.id = null;\n    }\n\n\n    onForm = (event) => {\n        const addEl = event.target.closest(\"[data-element=handleAdd]\");\n\n        if (addEl) {\n\n            if (this.wrapper !== null) {\n                return;\n            }\n            this.createForm();\n            \n            const { productForm } = this.subElements;\n\n            productForm.addEventListener('submit', this.onSave);\n\n        }\n    }\n\n    onSave = (event) => {\n        event.preventDefault();\n        const allowedFields = Object.keys(this.defaultForm);\n        const { productForm, body } = this.subElements;\n\n\n        const getValue = (field) => productForm.querySelector(`[name=${field}]`).value;\n        const data = {}\n\n        for (const field of allowedFields) {\n            if (field === 'title') {\n                data.id = getValue(field);\n            }\n            data[field] = getValue(field);\n        }\n        \n        const wrapper = document.createElement('div');\n        wrapper.classList = 'table__content-body-row table__content-row';\n        wrapper.dataset.element = `${data.id}`;\n        wrapper.dataset.id = `${data.id}`\n        wrapper.innerHTML = this.getTableRow(data);\n        \n        body.append(wrapper);\n\n\n        productForm.remove();\n        this.wrapper = null;\n        this.subElements.productForm = null;\n        this.id = null;\n    }\n\n    constructor() {\n        this.headerConfig = header;\n        this.data = data;\n        this.render();\n        this.defaultForm = {\n            title: '',\n            price: 0,\n        }\n        this.id = null;\n    }\n\n    render() {\n        const wrapper = document.createElement('div');\n\n        wrapper.innerHTML = this.getTemplate();\n        this.element = wrapper.firstElementChild;\n\n        this.subElements = this.getSubElements();\n        this.initEventListeners();\n    }\n\n    initEventListeners() {\n        const { tableContent, tableHeader } = this.subElements;\n\n        tableContent.addEventListener('click', this.onClick);\n        tableHeader.addEventListener('click', this.onForm);\n    }\n\n    removeEventListeners() {\n        document.removeEventListener('click', this.onClick);\n        document.removeEventListener('click', this.onForm);\n        document.removeEventListener('submit', this.onEdit);\n    }\n\n    createForm() {\n        this.wrapper = document.createElement('div');\n        this.wrapper.innerHTML = this.getFormGroup();\n\n        this.element.append(this.wrapper.firstElementChild);\n        this.subElements.productForm = this.element.querySelector('[data-element=productForm');\n    }\n\n\n    setFormData(item) {\n        const { productForm } = this.subElements;\n\n        const allowedFields = Object.keys(this.defaultForm);\n\n\n        for (const field of allowedFields) {\n            const name = productForm.querySelector(`[name=\"${field}\"]`);\n            if (name !== null) {\n                name.value = item[field] || this.defaultForm[field]\n            }\n        }\n\n        productForm.addEventListener('submit', this.onEdit)\n    }\n\n\n    editElement(event) {\n        if (this.wrapper !== null) {\n            return;\n        }\n\n        this.id = event.target.closest('.table__content-row').dataset.id;\n        const item = this.data.find((item) => item.id === this.id);\n\n        this.createForm();\n        this.setFormData(item);\n    }\n\n    getSubElements() {\n        const elements = this.element.querySelectorAll('[data-element]')\n        for (const item of elements) {\n            this.subElements[item.dataset.element] = item;\n        }\n        return this.subElements;\n    }\n\n\n    getTableHeader() {\n        return ` <div class=\"table__content-header-row  table__content-row\">\n        ${this.headerConfig.map((item) => this.getHeaderRow(item)).join('')}\n        </div>`\n    }\n\n    getHeaderRow({ id, title }) {\n        return `<div class=\"table__content-cell\" data-id=\"${id}\"><span>${title}</span></div>`\n    }\n\n\n    getTableBody(data) {\n        return `<div class=\"table__content-body\" data-element=\"body\">\n        ${this.getTableRows(data)}\n        </div>`\n    }\n\n    getTableRows(data) {\n        return data.map((item) => `\n        <div class=\"table__content-body-row table__content-row\" data-element=\"${item.id}\" data-id=\"${item.id}\">${this.getTableRow(item)}</div>\n        `).join('');\n    }\n\n\n    getTableRow(item) {\n        console.log(item);\n        const cells = this.headerConfig.map(({ id, template }) => {\n            return {\n                id,\n                template,\n            }\n        })\n\n        return cells.map(({ id, template }) => {\n            return template\n                ? template()\n                : ` <div class=\"table__content-cell\" data-element=\"${id}\">${item[id]}</div>`\n        }).join('');\n    }\n\n    getFormGroup() {\n        return `<form class=\"form-group\" data-element=\"productForm\">\n        <label for=\"name\" class=\"form-group__label\">Название</label>\n        <div class=\"form-group__input\">\n            <input class=\"form-group__control\" name=\"title\" type=\"text\" id=\"name\" required placeholder=\"Name product\">\n        </div>\n        <label for=\"price\" class=\"form-group__label\">Стоимость</label>\n        <div class=\"form-group__input\">\n            <input class=\"form-group__control\" name=\"price\" type=\"number\" id=\"price\" required placeholder=\"Price count\">\n        </div>\n        <div class=\"form-group__buttons\">\n            <button  name=\"save\" class=\"button button_primary\">\n                Save\n             </button>\n             <input  name=\"reset\" class=\"button button_primary\" type=\"reset\" value=\"Reset\">\n        </div>\n    </form>`\n    }\n\n\n    getTemplate() {\n        return `\n            <div class=\"container\" data-element=\"tableEdit\">\n                <div class=\"table__header table__content-row\" data-element=\"tableHeader\">\n                    <div class=\"table__title table__header-title\">Products</div>\n                    <div></div>\n                    <div class=\"table__icon table__header-icon\">\n                        <img src=\"./assets/icons/handleAdd.svg\" class=\"table__icon-img\" data-element=\"handleAdd\" alt=\"\">\n                    </div>\n                </div>\n                <div class=\"table__content\" data-element=\"tableContent\">\n                   ${this.getTableHeader()}\n                   ${this.getTableBody(this.data)}\n                </div>\n            </div>`\n    }\n\n\n\n    remove() {\n        if (this.element) {\n            this.element.remove();\n        }\n    }\n\n    destroy() {\n        this.remove();\n        this.element = null;\n        this.subElements = null;\n    }\n\n\n}","import Table from \"../../components/table\";\n\n\n\n\nexport default class Page {\n    subElements = {};\n    components = {};\n\n\n    render() {\n\n        const element = document.createElement('div');\n        element.innerHTML = this.getTemplate();\n\n        this.element = element.firstElementChild;\n\n        this.subElements = this.getSubElements();\n        this.initComponents();\n        this.renderComponents();\n\n        return this.element;\n    }\n\n\n    initComponents() {\n        const table = new Table()\n\n        this.components = {\n            table,\n        }\n    }\n\n    renderComponents() {\n        Object.keys(this.components).forEach(component => {\n            console.log(component);\n            const root = this.subElements[component];\n            const { element } = this.components[component];\n            root.append(element);\n        })\n    }\n\n\n\n    getSubElements() {\n        const elements = this.element.querySelectorAll('[data-element]')\n        for (const item of elements) {\n            this.subElements[item.dataset.element] = item;\n        }\n        return this.subElements;\n    }\n\n    removeEventListeners() {\n        this.removeEventListeners();\n    }\n\n    remove() {\n        if (this.element) {\n            this.element.remove()\n        }\n    }\n\n    destroy() {\n        this.remove();\n        this.element = null;\n        this.subElements = null;\n\n\n        for (const component of Object.values(this.components)) {\n            component.destroy();\n        }\n    }\n\n\n    getTemplate() {\n        return `\n        <div>\n        <div class=\"table\" data-element=\"table\">\n\n        </div>\n        </div>\n        `\n    }\n}"],"sourceRoot":""}